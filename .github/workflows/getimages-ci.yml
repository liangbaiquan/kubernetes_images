# This is a basic workflow to help you get started with Actions 
name: Get Docker images from gcr 
env:
  NEW_REGISTRY_URL: "registry.cn-hangzhou.aliyuncs.com/baiquan/" 
  NEW_REGISTRY_URL2: "docker.io/skydoor/" 
  
on:
  push: 
    paths: 
      - '.github/workflows/**' 

jobs: 
  build: 
    runs-on: ubuntu-18.04 
    steps: 
    - uses: actions/checkout@v2
    ## 上传到阿里云镜像仓库 
    - name: 获取gcr.io镜像 
      run: | 
        echo ${{ secrets.MY_ALI_REGISTRY_USERNAME}}
        echo ${{ secrets.MY_ALI_REGISTRY_PASSWD}}
        echo ${NEW_REGISTRY_URL} 
        docker login -u ${{ secrets.MY_ALI_REGISTRY_USERNAME}} -p ${{ secrets.MY_ALI_REGISTRY_PASSWD}} ${NEW_REGISTRY_URL} 
        echo "docker pull from k8s gcr io" 
        #docker pull k8s.gcr.io/descheduler/descheduler:v0.22.1 
        #docker tag k8s.gcr.io/descheduler/descheduler:v0.22.1 registry.cn-hangzhou.aliyuncs.com/baiquan/descheduler:v0.22.1 
        #docker push registry.cn-hangzhou.aliyuncs.com/baiquan/descheduler:v0.22.1
        
        
        #docker pull k8s.gcr.io/ingress-nginx/kube-webhook-certgen:v1.0
        #docker tag k8s.gcr.io/ingress-nginx/kube-webhook-certgen:v1.0 registry.cn-hangzhou.aliyuncs.com/baiquan/kube-webhook-certgen:v1.0
        #docker push registry.cn-hangzhou.aliyuncs.com/baiquan/kube-webhook-certgen:v1.0

       #docker pull k8s.gcr.io/ingress-nginx/kube-webhook-certgen:v1.0
       #docker tag k8s.gcr.io/ingress-nginx/kube-webhook-certgen:v1.0 registry.cn-hangzhou.aliyuncs.com/baiquan/kube-webhook-certgen:v1.0
       #docker push registry.cn-hangzhou.aliyuncs.com/baiquan/kube-webhook-certgen:v1.0

        docker pull k8s.gcr.io/kube-apiserver:v1.21.2
        docker pull k8s.gcr.io/kube-controller-manager:v1.21.2
        docker pull k8s.gcr.io/kube-scheduler:v1.21.2
        docker pull k8s.gcr.io/kube-proxy:v1.21.2
        docker pull k8s.gcr.io/pause:3.3
        docker pull k8s.gcr.io/coredns:1.8.0
        docker pull k8s.gcr.io/dns/k8s-dns-node-cache:1.21.1        
        
        
        
        
        
        
